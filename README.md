# GENERATE_RANDOM_IFT_USER_12M_4Q_BASE

## Формулировка задачи и техническое задание

Проект представляет собой генератор случайных пользователей IFT (If-Then) с параметрами 12M (12 месяцев) и 4Q (4 квартала) и их показателей с помесячной разбивкой.

**Техническое задание:**
- Создание базовой структуры проекта на Python
- Настройка системы логирования с уровнями INFO и DEBUG
- Загрузка и обработка списка организационных единиц из CSV файла
- Фильтрация данных по заданным критериям
- Экспорт обработанных данных в Excel с настройками форматирования
- Генерация случайных пользователей (клиентские менеджеры КСБ и менеджеры нефинансовых сервисов)
- Генерация показателей с помесячной разбивкой

## Подробное описание решения

Проект организован согласно стандартным правилам разработки:
- Весь код проекта находится в одном файле `src/main.py`, разделенный на модули
- **Проект использует библиотеки из стандартной установки Anaconda** (pandas, openpyxl)
- Работает на Python 3.9+ с Anaconda 3.9 (pandas и openpyxl обычно уже установлены)
- Не требует установки дополнительных пакетов, если используется стандартная установка Anaconda
- Тестовые файлы хранятся в `src/Tests`
- Дополнительная документация в папке `Docs`
- Входные данные (CSV файлы) размещаются в папке `IN`
- Выходные данные (Excel файлы) сохраняются в папке `OUT`
- Логи сохраняются в папку `log` с форматом: `Уровень_(тема)_годмесяцдень_часминута.log`
- Сообщения уровня INFO выводятся в консоль для отслеживания процесса выполнения
- Все параметры конфигурации задаются в начале файла `main.py` в разделе "ПАРАМЕТРЫ КОНФИГУРАЦИИ"

**Текущий функционал:**
- Загрузка организационных единиц из CSV файла
- Фильтрация данных по кодам ТБ и ГОСБ
- Экспорт в Excel с настройками форматирования (закрепленная первая строка, автофильтр, автоматическая ширина колонок)
- Генерация пользователей с уникальными табельными номерами и ФИО
- Распределение пользователей по подразделениям с возможностью фиксированного распределения
- Генерация специальных пользователей "Серая зона" в каждое подразделение
- Генерация движения пользователей по подразделениям за 12 месяцев (лист USER_CNG)
- Генерация клиентов с уникальными ИНН и наименованиями (лист CLIENTS)
- Генерация движения клиентов между менеджерами за 12 месяцев (лист CLIENT_CNG)
- Вывод сообщений уровня INFO в консоль для мониторинга процесса выполнения
- Детальная статистика в DEBUG логах
- Оптимизированная производительность с предзагрузкой данных

## Структура каталогов

```
GENERATE_RANDOM_IFT_USER_12M_4Q_BASE/
├── src/                    # Основной исходный код
│   ├── main.py            # Весь код проекта (модули внутри файла)
│   └── Tests/             # Тестовые файлы
├── IN/                     # Входные данные (CSV файлы)
├── OUT/                    # Выходные данные (Excel файлы)
├── Docs/                   # Дополнительная документация
├── log/                    # Файлы логов
├── .gitignore              # Игнорируемые файлы
├── requirements.txt        # Зависимости проекта
└── README.md              # Основная документация

**Примечание:** Все параметры конфигурации находятся в файле `src/main.py`. Файл `.env` не используется.
```

## Список переменных и функций

### Параметры конфигурации

Все параметры задаются в начале файла `src/main.py` в разделе "ПАРАМЕТРЫ КОНФИГУРАЦИИ":

**Общие параметры:**
- `APP_NAME` - Имя приложения (по умолчанию: `"GENERATE_RANDOM_IFT_USER_12M_4Q_BASE"`)
- `DEBUG` - Режим отладки (по умолчанию: `True`)
- `LOG_DIR` - Директория для хранения логов (по умолчанию: `"log"`)
- `LOG_LEVEL` - Уровень логирования: `"INFO"` или `"DEBUG"` (по умолчанию: `"DEBUG"`)
- `OUTPUT_DIR` - Директория для выходных Excel файлов (по умолчанию: `"OUT"`)
- `OUTPUT_FILE_BASE` - Базовое имя выходного Excel файла (по умолчанию: `"result_base"`)

**Конфигурация загрузчиков данных (`LOADER_CONFIG`):**

Структура конфигурации для каждого загрузчика (соответствует отдельному листу в Excel):

```python
LOADER_CONFIG = {
    'ORG': {
        'input_file': "IN/SVD_KB_DM_GAMIFICATION_ORG_UNIT_V20 - 2025.08.28.csv",
        'sheet_name': 'ORG',
        'max_column_width': 100,
        'filters': {
            'tb_code_exclude': {'99', '100', '101', '102'},
            'gosb_code_exclude': {'0', '9038', '9040'}
        },
        'column_mapping': {
            'TB_CODE': 'Код ТБ',
            'TB_FULL_NAME': 'Полное ТБ',
            # ... и т.д.
        }
    },
    'USERS': {
        'sheet_name': 'USERS',
        'max_column_width': 100,
        'business_blocks': {
            'KMKKSB': {
                'name': 'Клиентские менеджеры',
                'count': 1600,
                'gender_distribution': 0.5
            },
            'MNS': {
                'name': 'Менеджер нефинансовых сервисов',
                'count': 160,
                'gender_distribution': 0.5
            }
        },
        'tab_number': {
            'min_digits': 4,
            'max_digits': 7,
            'total_length': 8,
            'start_from': 1000
        },
        'gray_zone': {
            'tab_numbers': ["gray_zone", "00000000", "-00000001"],
            'fio_options': ["Серая зона", "-"]
        },
        'fixed_distribution': {
            'код_подразделения': {'KMKKSB': количество, 'MNS': количество}
        },
        'male_data': {
            'first_names': [...],
            'surnames': [...],
            'patronymics': [...]
        },
        'female_data': {
            'first_names': [...],
            'surnames': [...],
            'patronymics': [...]
        }
    }
    # В будущем здесь можно добавить другие загрузчики:
    # 'METRICS': {...}
}
```

**Параметры для загрузчика ORG:**
- `input_file` - Путь к входному CSV файлу
- `sheet_name` - Имя листа в Excel
- `max_column_width` - Максимальная ширина колонки (по умолчанию: `100`)
- `filters` - Словарь фильтров для исключения строк:
  - `tb_code_exclude` - Множество кодов ТБ для исключения
  - `gosb_code_exclude` - Множество кодов ГОСБ для исключения
- `column_mapping` - Словарь маппинга колонок: исходное_имя -> результирующее_имя

**Параметры для генератора USERS:**
- `sheet_name` - Имя листа в Excel (по умолчанию: `'USERS'`)
- `max_column_width` - Максимальная ширина колонки (по умолчанию: `100`)
- `business_blocks` - Словарь бизнес-блоков с параметрами:
  - `KMKKSB` / `MNS` - Код блока:
    - `name` - Название блока
    - `count` - Количество пользователей
    - `gender_distribution` - Распределение по полу (0.5 = 50% мужчин, 50% женщин)
- `tab_number` - Параметры табельных номеров:
  - `min_digits` - Минимальное количество значащих цифр (по умолчанию: `4`)
  - `max_digits` - Максимальное количество значащих цифр (по умолчанию: `7`)
  - `total_length` - Общая длина с лидирующими нулями (по умолчанию: `8`)
  - `start_from` - Начальное значение (по умолчанию: `1000`)
- `gray_zone` - Параметры специальных пользователей "Серая зона":
  - `tab_numbers` - Список вариантов табельных номеров
  - `fio_options` - Список вариантов ФИО
- `fixed_distribution` - Фиксированное распределение пользователей по подразделениям:
  - Формат: `{'код_подразделения': {'KMKKSB': количество, 'MNS': количество}}`
  - Пример: `{'10214308': {'KMKKSB': 1, 'MNS': 1}, '10354600': {'KMKKSB': 2}}`
  - Подразделения с фиксированным распределением исключаются из случайного распределения
- `male_data` - Данные для генерации мужских ФИО:
  - `first_names` - Список мужских имен
  - `surnames` - Список мужских фамилий
  - `patronymics` - Список мужских отчеств
- `female_data` - Данные для генерации женских ФИО:
  - `first_names` - Список женских имен
  - `surnames` - Список женских фамилий (задаются конкретные значения)
  - `patronymics` - Список женских отчеств

### Классы

#### `ProjectLogger`

Класс для управления логированием проекта.

**Особенности:**
- Создает логи с форматом: `Уровень_(тема)_годмесяцдень_часминута.log`
- DEBUG логи имеют формат: `дата время - [уровень] - сообщение [class: <имя класса> | def: <имя функции>]`
- INFO логи выводятся в консоль и сохраняются в файл
- DEBUG логи сохраняются только в файл

**Методы:**
- `_setup_file_handlers()` - Настройка файловых обработчиков для DEBUG и INFO логов
- `_setup_console_handler()` - Настройка консольного обработчика для вывода INFO сообщений
- `get_logger()` - Получение настроенного логгера

**Параметры инициализации:**
- `log_dir` (str): Директория для хранения логов (по умолчанию: `"log"`)
- `log_level` (str): Уровень логирования (по умолчанию: `"DEBUG"`)

#### `UserGenerator`

Класс для генерации пользователей с уникальными табельными номерами, ФИО и распределением по подразделениям.

**Параметры инициализации:**
- `config` (Dict): Словарь конфигурации из `LOADER_CONFIG['USERS']`
- `org_data` (pd.DataFrame): DataFrame с данными организационных единиц (из листа ORG)
- `output_file_base` (str): Базовое имя выходного Excel файла
- `output_dir` (str): Директория для выходных файлов
- `logger` (Optional[logging.Logger]): Логгер для записи событий

**Методы:**
- `_generate_tab_number()` - Генерирует уникальный табельный номер (от 4 до 7 значащих цифр, больше 999, с лидирующими нулями до 8 знаков)
- `_generate_fio(gender)` - Генерирует уникальное ФИО для указанного пола ('male' или 'female')
- `_create_user(org_unit, business_block_code)` - Создает одного пользователя для указанного подразделения и бизнес-блока
- `_distribute_users_to_org_units()` - Распределяет пользователей по подразделениям:
  1. Сначала распределяются фиксированные количества из `fixed_distribution`
  2. Затем в каждом подразделении добавляется минимум 1 КМ и 1 МНС (если еще не распределено)
  3. Остальные пользователи распределяются случайно (исключая подразделения с фиксированным распределением)
- `_add_gray_zone_users(org_units)` - Добавляет специальных пользователей "Серая зона" в каждое подразделение
- `_log_statistics(users)` - Выводит детальную статистику в DEBUG лог:
  - Количество блоков, ТБ, ГОСБ
  - Количество пользователей в каждом ГОСБ
  - Распределение по полу в разрезе блоков, ТБ и ГОСБ
- `save_to_excel(users)` - Сохраняет данные пользователей в Excel с настройками:
  - Лист: `USERS`
  - Первая строка закреплена
  - Автофильтр включен
  - Ширина колонок по содержимому (максимум 100)
  - Сортировка: Бизнес-блок → Полное ТБ → Полное ГОСБ → ФИО (специальные пользователи в конце каждого ТБ)
  - Табельный номер сохраняется как текст (с лидирующими нулями)
- `process()` - Выполняет полный цикл генерации пользователей

**Пример использования:**
```python
from src.main import UserGenerator, LOADER_CONFIG, get_logger
import pandas as pd

logger = get_logger()
org_data = pd.read_excel("OUT/result_base_20251111_0100.xlsx", sheet_name='ORG')

generator = UserGenerator(
    config=LOADER_CONFIG['USERS'],
    org_data=org_data,
    output_file_base="result_base",
    output_dir="OUT",
    logger=logger
)
output_file = generator.process()
```

#### `OrgUnitsLoader`

Класс для загрузки и обработки организационных единиц из CSV файла.

**Параметры инициализации:**
- `config` (Dict): Словарь конфигурации из `LOADER_CONFIG` для данного загрузчика
- `output_file_base` (str): Базовое имя выходного Excel файла
- `output_dir` (str): Директория для выходных файлов
- `logger` (Optional[logging.Logger]): Логгер для записи событий

**Методы:**
- `load_csv()` - Загружает данные из CSV файла
- `filter_data(df)` - Фильтрует данные по заданным критериям:
  - Исключает строки где `TB_CODE` в (99, 100, 101, 102)
  - Исключает строки где `GOSB_CODE` в (0, 9038, 9040)
- `select_columns(df)` - Выбирает и переименовывает необходимые колонки:
  - `TB_CODE` → `Код ТБ`
  - `TB_FULL_NAME` → `Полное ТБ`
  - `TB_SHORT_NAME` → `Короткое ТБ`
  - `GOSB_CODE` → `Код ГОСБ`
  - `GOSB_NAME` → `Полное ГОСБ`
  - `GOSB_SHORT_NAME` → `Короткое ГОСБ`
  - `ORG_UNIT_CODE` → `Код подразделения`
- `save_to_excel(df)` - Сохраняет данные в Excel с настройками:
  - Лист: `ORG`
  - Первая строка закреплена
  - Автофильтр включен
  - Ширина колонок по содержимому (максимум 100)
- `process()` - Выполняет полный цикл обработки

**Пример использования:**
```python
# Все классы и функции находятся в src/main.py
from src.main import OrgUnitsLoader, LOADER_CONFIG, get_logger

logger = get_logger()
loader = OrgUnitsLoader(
    config=LOADER_CONFIG['ORG'],
    output_file_base="result_base",
    output_dir="OUT",
    logger=logger
)
output_file = loader.process()
```

### Функции

#### `load_org_units(input_file, output_file_base, logger)`

Функция-обертка для загрузки и обработки организационных единиц.

**Параметры:**
- `config` (Dict): Словарь конфигурации из `LOADER_CONFIG` для загрузчика
- `output_file_base` (str): Базовое имя выходного Excel файла (по умолчанию: `"result_base"`)
- `output_dir` (str): Директория для выходных файлов (по умолчанию: `"OUT"`)
- `logger` (Optional[logging.Logger]): Логгер для записи событий

**Возвращает:**
- `str`: Путь к созданному Excel файлу

**Пример использования:**
```python
# Все классы и функции находятся в src/main.py
from src.main import load_org_units, LOADER_CONFIG, get_logger

logger = get_logger()
output = load_org_units(
    config=LOADER_CONFIG['ORG'],
    output_file_base="result_base",
    output_dir="OUT",
    logger=logger
)
print(f"Создан файл: {output}")
```

**Запуск приложения:**
```bash
# Запуск из корня проекта
python src/main.py

# Или с указанием PYTHONPATH
PYTHONPATH=/path/to/project python src/main.py
```

#### `get_logger(log_dir, log_level)`

Функция для получения настроенного логгера проекта.

**Параметры:**
- `log_dir` (Optional[str]): Директория для логов
- `log_level` (Optional[str]): Уровень логирования (`INFO` или `DEBUG`)

**Возвращает:**
- `logging.Logger`: Настроенный объект логгера

#### `generate_users(config, org_data, output_file_base, output_dir, logger)`

Функция-обертка для генерации пользователей.

**Параметры:**
- `config` (Dict): Словарь конфигурации из `LOADER_CONFIG['USERS']`
- `org_data` (pd.DataFrame): DataFrame с данными организационных единиц (из листа ORG)
- `output_file_base` (str): Базовое имя выходного Excel файла (по умолчанию: `"result_base"`)
- `output_dir` (str): Директория для выходных файлов (по умолчанию: `"OUT"`)
- `logger` (Optional[logging.Logger]): Логгер для записи событий

**Возвращает:**
- `str`: Путь к созданному Excel файлу

**Пример использования:**
```python
from src.main import generate_users, LOADER_CONFIG, get_logger
import pandas as pd

logger = get_logger()
org_data = pd.read_excel("OUT/result_base_20251111_0100.xlsx", sheet_name='ORG')

output = generate_users(
    config=LOADER_CONFIG['USERS'],
    org_data=org_data,
    output_file_base="result_base",
    output_dir="OUT",
    logger=logger
)
print(f"Создан файл: {output}")
```

#### `main()`

Главная функция приложения. Инициализирует логгер и выполняет обработку данных для всех загрузчиков из `LOADER_CONFIG`:
1. Сначала обрабатывается загрузчик `ORG` (загрузка организационных единиц)
2. Затем обрабатывается генератор `USERS` (генерация пользователей на основе данных ORG)

## Подробное описание генерации и движения по месяцам

### Генерация листа USER_CNG (движение пользователей)

Лист `USER_CNG` содержит данные о движении пользователей по подразделениям в течение 12 месяцев.

**Структура данных:**
- Колонки: `Табельный номер`, `ФИО`, `Бизнес-блок`
- Для каждого из 12 месяцев: `Месяц_X_Код подразделения`, `Месяц_X_Короткое ТБ`, `Месяц_X_Полное ГОСБ`

**Правила движения:**
1. **Начальное распределение (1 месяц):**
   - 90% пользователей распределены по подразделениям
   - 10% пользователей без подразделения (отображается как "-")

2. **Категории движения:**
   - **60%** - не меняют подразделение никогда
   - **20%** - меняют только ГОСБ внутри одного ТБ
   - **10%** - могут поменять и ГОСБ и ТБ
   - **5%** - могут уволиться в любой месяц (подразделение становится "-" и остается так до конца)
   - **5%** - новые сотрудники (из тех 10% без подразделения в 1 месяц)

3. **Ограничения:**
   - Пользователи не могут менять бизнес-блок
   - В каждом подразделении в каждый месяц должен быть хотя бы 1 сотрудник каждого блока
   - Количество мест в подразделении фиксируется с листа USERS (можно уменьшить, но не увеличить)
   - Все пользователи из USERS должны быть назначены в подразделение хотя бы раз за 12 месяцев

4. **Специальные пользователи:**
   - Пользователи "Серая зона" исключаются из листа USER_CNG

### Генерация листа CLIENTS (клиенты)

Лист `CLIENTS` содержит данные о клиентах (организациях).

**Структура данных:**
- `ИНН` - уникальный идентификационный номер налогоплательщика (12 знаков с лидирующими нулями)
- `Наименование` - уникальное наименование организации

**Правила генерации:**
1. **ИНН:**
   - Для ИП: 12 знаков
   - Для организаций: 10 знаков (дополняются до 12 лидирующими нулями)
   - Все ИНН уникальны

2. **Наименования:**
   - Для ИП: "ИП Фамилия И.О."
   - Для организаций: "ОПФ \"[приставка] Название [суффикс]\""
   - Распределение: 20% ИП, 80% организаций
   - Все наименования уникальны

3. **Варианты:**
   - ОПФ: ООО, ЗАО, АО, ПАО, ИП
   - Приставки: Центральный, Пригородный, Городской и т.д.
   - Суффиксы: филиал в г. Москва, филиал в г. Санкт-Петербург и т.д.
   - Названия: Торговый дом, Стройкомплекс, Промышленный комплекс и т.д.

### Генерация листа CLIENT_CNG (движение клиентов)

Лист `CLIENT_CNG` содержит данные о движении клиентов между менеджерами в течение 12 месяцев.

**Структура данных:**
- Колонки: `ИНН` (12 знаков с лидирующими нулями), `Наименование`
- Для каждого из 12 месяцев: `Месяц_X_Табельный номер` (8 знаков с лидирующими нулями), `Месяц_X_ФИО`, `Месяц_X_Код подразделения`, `Месяц_X_Короткое ТБ`, `Месяц_X_Полное ГОСБ`

**Правила движения:**
1. **Начальное распределение (1 месяц):**
   - 85% клиентов имеют менеджера (табельный номер)
   - 15% клиентов без менеджера (отображается как "-")

2. **Категории движения:**
   - **55%** - не меняют менеджера с тех пор как появляются
   - **10%** - меняют менеджера, но остаются в одном ГОСБ
   - **15%** - меняют менеджера, но остаются в одном ТБ
   - **10%** - могут менять и ТБ и ГОСБ
   - **10%** - могут убрать табельный (в том числе из тех, кто появился позже)

3. **Дополнительные правила:**
   - **5%** клиентов могут пропасть в какой-то из месяцев (получают "-" и остаются так до конца)
   - Если клиент появился (получил менеджера), то нельзя убрать менеджера (кроме пропадания)
   - Клиенты без менеджера могут появиться в последующие месяцы (10% вероятность появления в месяц)
   - Клиенты могут менять менеджера (10% вероятность изменения в месяц)

4. **Ограничения:**
   - В распределении участвуют только менеджеры из блока "Клиентские менеджеры" (KMKKSB)
   - Информация о менеджере берется из листа USER_CNG для соответствующего месяца
   - Если менеджер без подразделения в месяце, клиент переназначается другому менеджеру

5. **Клиенты с несколькими строками:**
   - **5%** клиентов могут иметь несколько строк (один ИНН в разных ТБ за разными КМ)
   - Количество повторов: от 0 до 10
   - Это позволяет моделировать ситуацию, когда один клиент обслуживается несколькими менеджерами одновременно

**Оптимизация производительности:**
- Данные о менеджерах предзагружаются для всех 12 месяцев один раз в начале симуляции
- Используется кэширование для быстрого доступа к информации о менеджерах
- Это значительно ускоряет процесс генерации (с ~60 минут до нескольких секунд)

## История версий

### Версия 1.0.0 (2025-11-12)

**Решенные проблемы:**
- Добавлена генерация листа USER_CNG с движением пользователей по подразделениям за 12 месяцев
- Добавлена генерация листа CLIENTS с уникальными организациями
- Добавлена генерация листа CLIENT_CNG с движением клиентов между менеджерами за 12 месяцев
- Оптимизирована производительность симуляции движения клиентов (предзагрузка данных)
- Исправлена проблема с поиском менеджеров по бизнес-блоку (используется полное название)

**Выполненные задачи:**
- Создан класс `UserChangeGenerator` для генерации движения пользователей
- Создан класс `ClientGenerator` для генерации клиентов
- Создан класс `ClientChangeGenerator` для генерации движения клиентов
- Добавлена поддержка нескольких строк для одного ИНН (5% клиентов)
- Реализовано форматирование ИНН (12 знаков) и табельных номеров (8 знаков) с лидирующими нулями
- Добавлена предзагрузка данных о менеджерах для оптимизации производительности
- Исправлен поиск менеджеров по полному названию бизнес-блока "Клиентские менеджеры"

**Технические детали:**
- USER_CNG: симуляция движения пользователей с учетом категорий (60% не меняют, 20% меняют ГОСБ, 10% меняют ТБ+ГОСБ, 5% увольняются)
- CLIENTS: генерация 20000 уникальных организаций с ИНН и наименованиями
- CLIENT_CNG: симуляция движения клиентов между менеджерами с учетом категорий и ограничений
- Оптимизация: метод `_preload_managers_data()` предзагружает все данные о менеджерах для всех месяцев
- Кэширование: метод `_get_available_managers_from_cache()` использует предзагруженные данные вместо повторных запросов
- Производительность: симуляция 25000+ клиентов на 12 месяцев выполняется за несколько секунд вместо ~60 минут

### Версия 0.9.0 (2025-11-11)

**Решенные проблемы:**
- Добавлен параметр `fixed_distribution` для задания точного количества пользователей в конкретных подразделениях
- Исправлена обработка типов данных кодов подразделений (строки/числа)
- Добавлены конкретные женские фамилии в конфигурацию вместо автоматической генерации
- Все параметры генерации пользователей собраны в единую структуру `LOADER_CONFIG['USERS']`

**Выполненные задачи:**
- Добавлен параметр `fixed_distribution` в конфигурацию USERS для фиксированного распределения пользователей
- Подразделения с фиксированным распределением исключаются из случайного распределения
- Исправлена логика сравнения кодов подразделений (работает со строками и числами)
- Добавлен полный список женских фамилий в конфигурацию `female_data['surnames']`
- Удалена логика автоматической генерации женских фамилий от мужских
- Все параметры генерации пользователей (количество, табельные номера, ФИО, фиксированное распределение) собраны в `LOADER_CONFIG['USERS']`
- Обновлена документация в README.md

**Технические детали:**
- Фиксированное распределение работает в 3 этапа:
  1. Сначала распределяются фиксированные количества из `fixed_distribution`
  2. Затем добавляется минимум по 1 КМ и 1 МНС в остальные подразделения
  3. Остальные пользователи распределяются случайно (исключая фиксированные подразделения)
- Коды подразделений конвертируются в строки для единообразного сравнения
- Женские фамилии заданы явно в конфигурации, как и мужские
- Структура конфигурации разбита по листам (ORG, USERS) и по темам (male_data, female_data)

### Версия 0.8.0 (2025-11-01)

**Решенные проблемы:**
- Перенесены все параметры из .env.example в main.py
- Удален файл .env.example (все параметры теперь в коде)
- Добавлены параметры APP_NAME и DEBUG в конфигурацию

**Выполненные задачи:**
- Добавлены параметры APP_NAME и DEBUG в раздел конфигурации main.py
- Удален файл .env.example (параметры теперь задаются напрямую в коде)
- Обновлена документация в README.md с описанием новых параметров
- Уточнено, что файл .env не используется

**Технические детали:**
- Все параметры конфигурации находятся в начале файла main.py
- Не требуется использование файлов .env или .env.example
- Параметры задаются как константы Python в разделе "ПАРАМЕТРЫ КОНФИГУРАЦИИ"

### Версия 0.7.0 (2025-11-01)

**Решенные проблемы:**
- Добавлен вывод сообщений уровня INFO в консоль
- Улучшена видимость процесса выполнения программы
- Упрощен мониторинг работы приложения без необходимости открывать файлы логов

**Выполненные задачи:**
- Добавлен консольный обработчик (StreamHandler) для вывода сообщений уровня INFO
- Создан метод `_setup_console_handler()` для настройки консольного вывода
- Сообщения уровня INFO теперь отображаются в консоли в реальном времени
- Обновлена документация в README.md

**Технические детали:**
- Консольный обработчик использует тот же форматтер, что и файловые логи INFO
- Формат вывода: `дата время - [INFO] - сообщение`
- DEBUG сообщения остаются только в файлах логов
- Консольный вывод помогает отслеживать прогресс выполнения программы

### Версия 0.6.0 (2025-11-01)

**Решенные проблемы:**
- Возвращено использование pandas и openpyxl из стандартной установки Anaconda
- Упрощен код за счет использования готовых библиотек вместо ручного создания XML
- Улучшена производительность и читаемость кода

**Выполненные задачи:**
- Возвращен pandas для работы с CSV и DataFrame
- Возвращен openpyxl для создания и форматирования Excel файлов
- Удалены методы ручного создания XML структуры Excel
- Упрощен код загрузки, фильтрации и сохранения данных
- Обновлен requirements.txt с указанием библиотек из Anaconda
- Обновлена документация в README.md

**Технические детали:**
- CSV файлы читаются через pandas.read_csv()
- Excel файлы создаются через pandas.ExcelWriter с engine='openpyxl'
- Форматирование Excel выполняется через openpyxl (закрепленная строка, автофильтр, ширина колонок, жирный шрифт)
- Проект использует библиотеки, которые обычно уже установлены в Anaconda

### Версия 0.5.0 (2025-11-01)

**Решенные проблемы:**
- Объединены все параметры загрузки ORG в единую структуру конфигурации `LOADER_CONFIG`
- Улучшена наглядность и организация параметров конфигурации
- Подготовлена структура для добавления новых загрузчиков данных в будущем

**Выполненные задачи:**
- Создана структура `LOADER_CONFIG` для централизованного хранения параметров загрузчиков
- Все параметры ORG (входной файл, фильтры, маппинг колонок, настройки Excel) объединены в один словарь
- Обновлен класс `OrgUnitsLoader` для работы с новой структурой конфигурации
- Обновлена функция `main()` для обработки всех загрузчиков из `LOADER_CONFIG`
- Добавлены комментарии-примеры для будущих загрузчиков (USERS, METRICS)
- Обновлена документация в README.md

**Технические детали:**
- Структура `LOADER_CONFIG` позволяет легко добавлять новые загрузчики данных
- Каждый загрузчик имеет свою конфигурацию: входной файл, фильтры, маппинг колонок, настройки Excel
- Функция `main()` автоматически обрабатывает все загрузчики из конфигурации
- Параметры организованы в иерархическую структуру для лучшей читаемости

### Версия 0.6.0 (2025-11-01)

**Решенные проблемы:**
- Возвращено использование pandas и openpyxl из стандартной установки Anaconda
- Упрощен код за счет использования готовых библиотек вместо ручного создания XML
- Улучшена производительность и читаемость кода

**Выполненные задачи:**
- Возвращен pandas для работы с CSV и DataFrame
- Возвращен openpyxl для создания и форматирования Excel файлов
- Удалены методы ручного создания XML структуры Excel
- Упрощен код загрузки, фильтрации и сохранения данных
- Обновлен requirements.txt с указанием библиотек из Anaconda
- Обновлена документация в README.md

**Технические детали:**
- CSV файлы читаются через pandas.read_csv()
- Excel файлы создаются через pandas.ExcelWriter с engine='openpyxl'
- Форматирование Excel выполняется через openpyxl (закрепленная строка, автофильтр, ширина колонок, жирный шрифт)
- Проект использует библиотеки, которые обычно уже установлены в Anaconda

### Версия 0.4.0 (2025-11-01)

**Решенные проблемы:**
- Переписан код для использования только стандартной библиотеки Python
- Удалены зависимости от pandas и openpyxl
- Проект теперь работает на Python 3.9+ (включая Anaconda 3.9) без дополнительных установок
- Реализовано создание Excel файлов через zipfile и xml.etree.ElementTree

**Выполненные задачи:**
- Заменен pandas на стандартный модуль csv для чтения CSV файлов
- Заменен openpyxl на создание .xlsx файлов через zipfile и XML (формат Office Open XML)
- Реализованы все функции форматирования Excel (закрепленная строка, автофильтр, ширина колонок, жирный шрифт)
- Обновлен requirements.txt - удалены все внешние зависимости
- Обновлена документация в README.md

**Технические детали:**
- CSV файлы читаются через стандартный модуль `csv`
- Excel файлы создаются как ZIP архивы с XML файлами внутри (формат Office Open XML)
- Все функции форматирования реализованы через XML структуру
- Проект полностью автономен и не требует установки дополнительных пакетов

### Версия 0.3.0 (2025-11-01)

**Решенные проблемы:**
- Объединен весь код проекта в один файл `main.py`
- Все параметры конфигурации перенесены в начало файла
- Удалены отдельные модули и файлы конфигурации `.env`
- Упрощена структура проекта

**Выполненные задачи:**
- Объединены модули логирования и загрузки организационных единиц в `main.py`
- Все параметры вынесены в раздел "ПАРАМЕТРЫ КОНФИГУРАЦИИ" в начале файла
- Удалены файлы `logger.py` и `org_units_loader.py`
- Обновлена документация в README.md

**Технические детали:**
- Весь код проекта находится в `src/main.py`, разделенный на модули:
  - Модуль логирования (класс `ProjectLogger` и функция `get_logger`)
  - Модуль загрузки организационных единиц (класс `OrgUnitsLoader` и функция `load_org_units`)
  - Главная функция `main()`
- Все параметры задаются в начале файла как константы
- Не требуется использование переменных окружения или `.env` файлов

### Версия 0.2.0 (2025-11-01)

**Решенные проблемы:**
- Реализована загрузка организационных единиц из CSV файла
- Добавлена фильтрация данных по кодам ТБ и ГОСБ
- Реализован экспорт в Excel с настройками форматирования
- Исправлен формат таймштампа в именах файлов логов (добавлены минуты)
- Добавлена обработка ошибок при загрузке и обработке данных

**Выполненные задачи:**
- Создан модуль `org_units_loader.py` для загрузки и обработки организационных единиц
- Обновлен `main.py` для вызова функции загрузки
- Добавлены зависимости: `pandas` и `openpyxl`
- Настроена фильтрация данных по заданным критериям
- Реализовано форматирование Excel файлов (закрепленная строка, автофильтр, ширина колонок)
- Обновлена документация в README.md

**Технические детали:**
- CSV файл загружается с разделителем `;` и кодировкой UTF-8
- Фильтрация исключает строки с `TB_CODE` в (99, 100, 101, 102) и `GOSB_CODE` в (0, 9038, 9040)
- Выходной Excel файл содержит только выбранные колонки с переименованными заголовками
- Имя выходного файла формируется как `{output_file_base}_YYYYMMDD_HHMM.xlsx`

### Версия 0.1.0 (2025-11-01)

**Решенные проблемы:**
- Создана базовая структура проекта
- Настроена система логирования с уровнями INFO и DEBUG
- Подготовлена инфраструктура для разработки
- Настроен .gitignore для исключения временных файлов и секретов
- Создан шаблон .env.example

**Выполненные задачи:**
- Инициализация структуры каталогов
- Создание базового модуля логирования
- Настройка виртуального окружения
- Подготовка файлов конфигурации

